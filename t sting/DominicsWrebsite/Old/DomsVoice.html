<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Calibration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@200;300;400;600&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0"
        rel="stylesheet" />
    <style>
        :root {
            --obsidian: #050505;
            --gold: #9c844d;
            --zinc: #18181b;
        }

        body {
            background-color: var(--obsidian);
            color: #d1d1d1;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            cursor: none;
            user-select: none;
        }

        .serif {
            font-family: 'Cinzel', serif;
        }

        /* CUSTOM CURSOR - The Point of Control */
        #cursor {
            width: 12px;
            height: 12px;
            background: var(--gold);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 10000;
            transform: translate(-50%, -50%);
            transition: transform 0.1s;
            box-shadow: 0 0 15px var(--gold);
            mix-blend-mode: difference;
        }

        #cursor.active {
            transform: translate(-50%, -50%) scale(3);
            background: transparent;
            border: 1px solid var(--gold);
        }

        /* LAYOUTS */
        .screen {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1.5s cubic-bezier(0.22, 1, 0.36, 1);
            background: radial-gradient(circle at center, #111, #000);
        }

        .screen.active {
            opacity: 1;
            pointer-events: all;
            z-index: 10;
        }

        /* UI ELEMENTS */
        .card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid #333;
            transition: all 0.3s;
            cursor: none;
        }

        .card:hover {
            border-color: var(--gold);
            transform: translateY(-5px);
            background: rgba(156, 132, 77, 0.1);
        }

        .btn {
            border: 1px solid #333;
            padding: 1rem 3rem;
            text-transform: uppercase;
            letter-spacing: 0.3em;
            font-size: 0.75rem;
            transition: all 0.5s;
            color: #888;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            border-color: var(--gold);
            color: #fff;
            box-shadow: 0 0 20px rgba(156, 132, 77, 0.2);
        }

        /* ATMOSPHERE */
        .scanline {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 50;
            opacity: 0.05;
            background: repeating-linear-gradient(to bottom, transparent 0px, transparent 2px, black 3px);
        }

        /* THE PULSE (Breathing effect) */
        @keyframes breathe {

            0%,
            100% {
                transform: scale(1);
                filter: brightness(1);
            }

            50% {
                transform: scale(1.02);
                filter: brightness(1.1);
            }
        }

        .pulse-active {
            animation: breathe 6s ease-in-out infinite;
        }
    </style>
</head>

<body>
    <div id="cursor"></div>
    <div class="scanline"></div>

    <div class="screen active" id="s0">
        <div class="text-center space-y-8 max-w-lg px-8">
            <h1 class="serif text-6xl text-white tracking-widest opacity-90">RYKER</h1>
            <div class="h-px w-24 bg-[#9c844d] mx-auto"></div>
            <p class="text-xs uppercase tracking-[0.3em] text-zinc-500 leading-relaxed">
                The external world is noise.<br />Here, there is only alignment.<br /><br />
                <span class="text-[#9c844d] opacity-70">Requires Audio</span>
            </p>
            <button class="btn interactable" onclick="start()">Initiate</button>
        </div>
    </div>

    <div class="screen" id="s1">
        <div class="text-center space-y-12">
            <h2 class="serif text-2xl text-zinc-300">Phase I: Recognition</h2>
            <div class="grid grid-cols-2 gap-6">
                <div class="card w-32 h-32 flex items-center justify-center interactable" onclick="next(2)"><span
                        class="material-symbols-outlined text-4xl text-zinc-500">change_history</span></div>
                <div class="card w-32 h-32 flex items-center justify-center interactable" onclick="next(2)"><span
                        class="material-symbols-outlined text-4xl text-zinc-500">circle</span></div>
                <div class="card w-32 h-32 flex items-center justify-center interactable" onclick="next(2)"><span
                        class="material-symbols-outlined text-4xl text-zinc-500">pentagon</span></div>
                <div class="card w-32 h-32 flex items-center justify-center interactable" onclick="next(2)"><span
                        class="material-symbols-outlined text-4xl text-zinc-500">all_inclusive</span></div>
            </div>
            <p class="text-[10px] uppercase tracking-widest text-zinc-600">Select your geometry</p>
        </div>
    </div>

    <div class="screen" id="s2">
        <div class="text-center max-w-md">
            <span class="material-symbols-outlined text-4xl text-[#9c844d] mb-6">graphic_eq</span>
            <h2 class="serif text-3xl text-white mb-4">Stillness is Authority</h2>
            <p class="text-xs text-zinc-500 uppercase tracking-widest leading-relaxed mb-8">
                Fidgeting leaks power.<br />Hold your cursor perfectly still to charge.
            </p>
            <div class="w-full h-1 bg-zinc-800 rounded overflow-hidden">
                <div class="h-full bg-[#9c844d] w-0 transition-all duration-75" id="fill"></div>
            </div>
            <p class="text-[10px] text-red-500 uppercase tracking-widest mt-4 opacity-0 transition-opacity" id="warn">
                Movement Detected</p>
        </div>
    </div>

    <div class="screen" id="s3">
        <div class="max-w-xl text-center space-y-8 px-8">
            <h2 class="serif text-2xl text-white">The Reframing</h2>
            <p class="text-sm text-zinc-400 font-light leading-relaxed">
                You believe you are solving a puzzle. You are not.<br />
                You are revealing your need for structure.<br />
                Why do you resist?
            </p>
            <div class="space-y-4 pt-4">
                <button
                    class="w-full p-4 border border-zinc-800 hover:border-[#9c844d] text-xs uppercase tracking-widest text-zinc-500 hover:text-white transition-colors interactable"
                    onclick="trap()">I fear chaos.</button>
                <button
                    class="w-full p-4 border border-zinc-800 hover:border-[#9c844d] text-xs uppercase tracking-widest text-zinc-500 hover:text-white transition-colors interactable"
                    onclick="trap()">I seek purpose.</button>
            </div>
            <div class="text-[#9c844d] text-xs italic opacity-0 transition-opacity duration-1000" id="trap-msg">"Both
                are admissions of surrender. Proceed."</div>
        </div>
    </div>

    <div class="screen" id="s4">
        <div class="text-center space-y-6">
            <span class="material-symbols-outlined text-6xl text-[#9c844d]">verified_user</span>
            <h1 class="serif text-4xl text-white">CALIBRATION COMPLETE</h1>
            <p class="text-xs text-zinc-500 uppercase tracking-[0.3em]">Consent Archived.<br />Welcome to the Quiet.</p>
        </div>
    </div>

    <script>
        // --- AUDIO ENGINE (The Pulse) ---
        let drone, pulse;

        async function initAudio() {
            await Tone.start();

            // 1. The Drone (Atmosphere)
            drone = new Tone.Oscillator(55, "sine").toDestination().start();
            drone.volume.value = -20;

            // 2. The Heartbeat (Low Kick)
            const kick = new Tone.MembraneSynth().toDestination();
            kick.volume.value = -10;

            // Loop the heartbeat
            const loop = new Tone.Loop(time => {
                kick.triggerAttackRelease("C1", "8n", time);
                // Visual Sync
                document.body.classList.add('pulse-active');
            }, "4n").start(0);

            Tone.Transport.bpm.value = 50; // Slow, deliberate pulse
            Tone.Transport.start();
        }

        function playTone(freq) {
            const synth = new Tone.Synth({
                envelope: { attack: 0.01, decay: 0.1, sustain: 0, release: 0.5 }
            }).toDestination();
            synth.volume.value = -15;
            synth.triggerAttackRelease(freq, "8n");
        }

        // --- NAVIGATION ---
        function show(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            setTimeout(() => document.getElementById('s' + id).classList.add('active'), 100);
        }

        function start() {
            initAudio();
            show(1);
        }

        function next(id) {
            playTone("C5");
            show(id);
            if (id === 2) initStillness();
        }

        // --- MECHANIC: STILLNESS TEST ---
        function initStillness() {
            let progress = 0;
            let lastX = 0, lastY = 0;
            const bar = document.getElementById('fill');
            const warn = document.getElementById('warn');

            // Check movement every 30ms
            const check = setInterval(() => {
                if (!document.getElementById('s2').classList.contains('active')) { clearInterval(check); return; }

                // Auto-fill if still
                progress += 0.5;
                bar.style.width = progress + '%';

                if (progress >= 100) {
                    clearInterval(check);
                    playTone("G4");
                    setTimeout(() => next(3), 500);
                }
            }, 30);

            // Detect Jitter
            document.addEventListener('mousemove', (e) => {
                if (!document.getElementById('s2').classList.contains('active')) return;

                const dist = Math.abs(e.clientX - lastX) + Math.abs(e.clientY - lastY);
                if (dist > 5) { // If moved more than 5px
                    progress = Math.max(0, progress - 10); // Penalty
                    warn.style.opacity = 1;
                    // Jitter Sound
                    const noise = new Tone.NoiseSynth().toDestination();
                    noise.volume.value = -20;
                    noise.triggerAttackRelease("32n");

                    setTimeout(() => warn.style.opacity = 0, 500);
                }
                lastX = e.clientX; lastY = e.clientY;
            });
        }

        // --- MECHANIC: THE TRAP ---
        function trap() {
            playTone("A3");
            document.getElementById('trap-msg').style.opacity = 1;
            setTimeout(() => next(4), 2500);
        }

        // --- CUSTOM CURSOR ---
        const cursor = document.getElementById('cursor');
        document.addEventListener('mousemove', e => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });

        // Hover effects
        document.querySelectorAll('.interactable').forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('active'));
            el.addEventListener('mouseleave', () => cursor.classList.remove('active'));
        });
    </script>
</body>

</html>