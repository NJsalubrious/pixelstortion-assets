<!DOCTYPE html>
<html class="scroll-smooth" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>PixelStortion | Immersive Crime Series.</title>

    <!-- External CDN Scripts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />

    <!-- Centralized URL Manifest - MUST be loaded before other scripts -->
    <script src="../../site-manifest.js"></script>

    <!-- External CSS (AFTER Tailwind per cascade order) -->
    <link rel="stylesheet" href="css/silence.css">
</head>

<body class="selection:bg-green-900 selection:text-white">

    <div class="cursor-glow" id="cursor-glow"></div>
    <div class="cursor-dot" id="cursor-dot"></div>
    <div class="scanlines"></div>

    <nav class="fixed top-0 w-full z-40 bg-black/90 border-b border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0 cursor-pointer" onclick="openBioPopup()">
                    <h1 class="text-2xl font-bold tracking-tighter text-white glitch-text" data-text="PIXELSTORTION">
                        PIXELSTORTION</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8 font-mono-custom text-sm">
                        <button
                            class="text-gray-300 hover:text-white px-3 py-2 rounded-md font-medium transition-colors active-tab"
                            id="nav-home" onclick="switchTab('home')">TRANSMISSION</button>
                        <button
                            class="text-gray-300 hover:text-white px-3 py-2 rounded-md font-medium transition-colors"
                            id="nav-files" onclick="switchTab('files')">THE FILES</button>
                        <button
                            class="text-gray-300 hover:text-white px-3 py-2 rounded-md font-medium transition-colors"
                            id="nav-profiles" onclick="switchTab('profiles')">SUBJECTS</button>
                        <button
                            class="text-gray-300 hover:text-white px-3 py-2 rounded-md font-medium transition-colors"
                            id="nav-games" onclick="switchTab('games')">GAMES</button>
                        <button
                            class="text-gray-300 hover:text-white px-3 py-2 rounded-md font-medium transition-colors"
                            id="nav-audio" onclick="switchTab('audio')">THE STORY</button>
                    </div>
                </div>
                <div class="-mr-2 flex md:hidden">
                    <button
                        class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-800 focus:outline-none"
                        onclick="toggleMobileMenu()">
                        <span class="material-symbols-outlined">menu</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="md:hidden hidden bg-black border-b border-gray-800 fixed top-16 w-full z-30" id="mobile-menu">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 font-mono-custom">
            <button
                class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium w-full text-left"
                onclick="switchTab('home')">TRANSMISSION</button>
            <button
                class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium w-full text-left"
                onclick="switchTab('files')">THE FILES</button>
            <button
                class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium w-full text-left"
                onclick="switchTab('profiles')">SUBJECTS</button>
            <button
                class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium w-full text-left"
                onclick="switchTab('games')">GAMES</button>
            <button
                class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium w-full text-left"
                onclick="switchTab('audio')">THE STORY</button>
        </div>
    </div>

    <main class="h-screen relative overflow-hidden">

        <section class="relative w-full h-full flex flex-col items-center justify-center overflow-hidden"
            id="home-section">
            <canvas class="absolute top-0 left-0 w-full h-full z-0 opacity-20" id="noiseCanvas"></canvas>
            <div class="relative z-10 text-center px-4 max-w-4xl mx-auto space-y-8">
                <div
                    class="inline-block border border-green-500/30 bg-black/50 px-4 py-1 rounded-full backdrop-blur-sm mb-4">
                    <span
                        class="text-green-500 font-mono-custom text-xs tracking-widest uppercase flex items-center gap-2">
                        <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                        System Online // Secure Connection
                    </span>
                </div>
                <h2
                    class="text-5xl md:text-8xl font-black text-white tracking-tighter leading-none mb-6 mix-blend-difference">
                    SILENCE IS<br />THE TRAUMA
                </h2>
                <p class="text-xl md:text-2xl text-gray-400 font-light max-w-2xl mx-auto leading-relaxed">
                    An immersive original music crime series<br />
                    <span class="text-white font-medium">Three lives. One storm.</span>

                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center pt-8">
                    <button
                        class="px-8 py-4 bg-white text-black font-bold text-lg hover:bg-gray-200 transition-colors uppercase tracking-widest font-mono-custom flex items-center justify-center gap-2"
                        onclick="switchTab('files')">
                        Access Archives
                    </button>
                    <button
                        class="px-8 py-4 border border-white/30 text-white font-bold text-lg hover:bg-white/10 transition-colors uppercase tracking-widest font-mono-custom flex items-center justify-center gap-2"
                        onclick="switchTab('audio')">
                        <span class="material-symbols-outlined text-xl">play_circle</span> Listen
                    </button>
                </div>
            </div>
        </section>

        <section class="hidden h-full overflow-y-auto p-6 md:p-12 pb-24 pt-28" id="files-section">
            <div class="max-w-6xl mx-auto">
                <header class="mb-12 border-b border-gray-800 pb-6 flex justify-between items-end">
                    <div>
                        <h2 class="text-4xl md:text-5xl font-bold text-white mb-2">THE ARCHIVES</h2>
                        <p class="font-mono-custom text-gray-500 text-sm">CLASSIFIED DOCUMENTS // CLEARANCE LEVEL 4</p>
                    </div>
                </header>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="files-grid">
                </div>
            </div>
        </section>

        <section class="hidden h-full overflow-y-auto p-6 md:p-12 bg-zinc-950 pb-24 pt-28" id="profiles-section">
            <div class="max-w-7xl mx-auto">
                <header class="mb-12 border-b border-gray-800 pb-6">
                    <h2 class="text-4xl md:text-5xl font-bold text-white mb-2">SUBJECT PROFILES</h2>
                    <p class="font-mono-custom text-gray-500 text-sm">KEY PLAYERS IN THE RYKER SYNDICATE CASE</p>
                </header>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8" id="profiles-grid">
                </div>
            </div>
        </section>
        <section class="hidden h-full overflow-y-auto p-6 md:p-12 bg-zinc-950 pb-24 pt-28" id="games-section">
            <div class="max-w-7xl mx-auto">
                <header class="mb-12 border-b border-gray-800 pb-6">
                    <h2 class="text-4xl md:text-5xl font-bold text-white mb-2">GAMES</h2>
                    <p class="font-mono-custom text-gray-500 text-sm">FOR BETTER OR FOR WORSE</p>
                </header>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4" id="games-grid">
                </div>
            </div>
        </section>
        <section class="hidden min-h-[calc(100vh-4rem)] p-6 md:p-12 flex flex-col items-center pt-28"
            id="audio-section">
            <div class="w-full max-w-5xl">
                <header class="mb-8 border-b border-gray-800 pb-6 flex justify-between items-center">
                    <div>
                        <h2 class="text-4xl font-bold text-white mb-2">THE STORY</h2>
                        <p class="font-mono-custom text-gray-500 text-sm">ETHEL'S ORIGIN STORY — an ongoing visual
                            exploration of the narrative</p>
                    </div>
                </header>

                <div
                    class="bg-gray-900/50 backdrop-blur-md rounded-xl border border-gray-800 overflow-hidden flex flex-col md:flex-row h-[600px]">

                    <div class="w-full md:w-1/3 border-r border-gray-800 overflow-y-auto bg-black/40">
                        <div class="p-4 bg-black/60 border-b border-gray-800 sticky top-0 z-10">
                            <h3 class="text-xs font-mono-custom text-gray-400 uppercase tracking-widest">Decrypted
                                Tracks</h3>
                        </div>
                        <div id="playlist-container" class="divide-y divide-gray-800/50">
                        </div>
                    </div>

                    <div class="w-full md:w-2/3 flex flex-col relative bg-black">

                        <div id="story-gallery" class="absolute inset-0 overflow-hidden">
                            <img id="story-bg-1" src="https://via.placeholder.com/800x600/330000/ffffff?text=Story+1"
                                class="absolute inset-0 w-full h-full object-cover story-image opacity-0 z-0 transition-opacity duration-1000">
                            <img id="story-bg-2" src="https://via.placeholder.com/800x600/003300/ffffff?text=Story+2"
                                class="absolute inset-0 w-full h-full object-cover story-image opacity-0 z-0 transition-opacity duration-1000">
                            <img id="story-bg-3" src="https://via.placeholder.com/800x600/000033/ffffff?text=Story+3"
                                class="absolute inset-0 w-full h-full object-cover story-image opacity-0 z-0 transition-opacity duration-1000">
                        </div>

                        <!-- YouTube Player (hidden by default, shown when showVideo: true) -->
                        <div id="youtube-player"
                            class="absolute inset-0 w-full h-full z-[-1] opacity-0 pointer-events-none"></div>

                        <div
                            class="absolute inset-0 bg-gradient-to-b from-black/30 via-black/40 to-black/60 z-0 pointer-events-none">
                        </div>
                        <div class="absolute inset-0 bg-black/20 z-0 pointer-events-none mix-blend-multiply"></div>

                        <div class="flex-1 relative flex items-center justify-center overflow-hidden z-10">
                            <div class="relative z-10 p-8 text-center max-w-lg">
                                <h4 id="current-track-title" class="text-2xl font-bold text-white mb-2 tracking-tight">
                                    Select a Track</h4>

                                <h5 id="current-track-date"
                                    class="text-green-500 font-mono-custom text-xs tracking-[0.2em] mb-4 uppercase opacity-80">
                                    TIMELINE: WAITING...
                                </h5>

                                <p id="current-track-artist" class="text-gray-500 font-mono-custom text-xs mb-8">DATA
                                    SOURCE: OFFLINE</p>

                                <div id="lyrics-display"
                                    class="font-mono-custom text-gray-300 text-sm md:text-base leading-relaxed h-48 overflow-y-auto pr-2 scrollbar-thin">
                                    [Audio stream encryption active. Select a file to decrypt playback.]
                                </div>
                            </div>

                            <div id="visualizer-container"
                                class="absolute bottom-0 left-0 right-0 h-32 flex items-end justify-center pb-0 gap-[2px] opacity-0 transition-opacity duration-500 z-10"
                                style="display: none !important;">
                            </div>
                        </div>

                        <div
                            class="h-24 bg-zinc-900 border-t border-gray-800 p-4 flex items-center justify-between z-20 relative">
                            <div class="flex items-center gap-4">
                                <button id="play-btn" onclick="togglePlay()"
                                    class="w-12 h-12 rounded-full bg-white text-black flex items-center justify-center hover:bg-green-400 transition-colors">
                                    <span class="material-symbols-outlined text-3xl">play_arrow</span>
                                </button>
                                <button id="focus-btn" onclick="toggleFocusMode()"
                                    class="w-10 h-10 rounded border border-gray-600 text-gray-400 flex items-center justify-center hover:bg-gray-800 hover:text-green-400 transition-colors font-mono-custom text-xs"
                                    title="Visual Focus Mode">
                                    <span class="material-symbols-outlined text-lg">filter_center_focus</span>
                                </button>
                            </div>
                            <div class="flex-1 text-center px-4">
                                <p class="text-[9px] font-mono-custom text-gray-600 leading-tight">
                                    PROJECT STATUS: UNDER CONSTRUCTION<br>
                                    VISUALS VARY: CONTAINS FINAL MOVIES | DRAFT IMAGES | PLACEHOLDERS
                                </p>
                            </div>
                            <div class="text-right">
                                <p class="text-xs font-mono-custom text-gray-500">SYSTEM STATUS</p>
                                <p id="player-status" class="text-xs text-green-500 font-bold">IDLE</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>



    <!-- Protocol Tabs removed - games now accessible via GAMES tab -->

    <!-- Right Side Panel Tabs -->
    <div id="right-panel-tabs">
        <!-- CINEMA: Opens in new tab (external app style) -->
        <a href="#"
            onclick="event.preventDefault(); if(ytPlayer && ytPlayer.pauseVideo) ytPlayer.pauseVideo(); window.open(PIXEL_MANIFEST.CINEMA, '_blank');"
            class="right-panel-tab cinema-external" title="Opens in new tab">
            <span class="material-symbols-outlined" style="font-size: 10px; margin-bottom: 4px;">open_in_new</span>
            CINEMA
        </a>
        <!-- GALLERY: Opens in iframe panel -->
        <button onclick="toggleMediaPanel('gallery')" class="right-panel-tab">
            GALLERY
        </button>
    </div>

    <!-- Media Panel (Cinema/Gallery) -->
    <div id="media-panel">
        <button onclick="toggleMediaPanel()"
            class="absolute top-4 left-4 text-gray-500 hover:text-white transition-colors z-50 p-2 bg-black/50 rounded-full"
            title="Close">
            <span class="material-symbols-outlined">close</span>
        </button>

        <iframe id="media-panel-iframe" src="about:blank" class="w-full h-full border-0 block"
            allow="autoplay; fullscreen"></iframe>
    </div>

    <div id="cipher-game-panel">
        <button onclick="toggleCipherGame()"
            class="absolute top-2 right-2 text-gray-500 hover:text-white transition-colors z-50 p-2 bg-black/50 rounded-full"
            title="Close Protocol">
            <span class="material-symbols-outlined">close</span>
        </button>

        <iframe id="cipher-game-iframe" src="about:blank" class="w-full h-full border-0 block"
            allow="autoplay; fullscreen">
        </iframe>
    </div>

    <div class="fixed inset-0 z-50 hidden" id="info-modal">
        <div class="absolute inset-0 bg-black/45 backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="absolute inset-0 w-full h-full bg-black p-0 overflow-y-auto">
            <!-- Close button (moved outside header for independent control) -->
            <button
                class="absolute top-4 right-4 z-50 text-gray-400 hover:text-white bg-black/50 rounded-full p-2 transition-colors"
                onclick="closeModal()">
                <span class="material-symbols-outlined">close</span>
            </button>

            <div class="flex justify-between items-center p-4 border-b border-gray-700 bg-black sticky top-0">
                <h3 class="text-xl font-bold text-white font-mono-custom" id="modal-title">FILE CONTENT</h3>
            </div>
            <div class="p-8 h-full" id="modal-content"></div>
        </div>
    </div>

    <!-- Bio Popup Modal -->
    <div id="bioPopup"
        class="fixed inset-0 bg-black/90 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4"
        onclick="closeBioPopup()">
        <div class="bg-gray-900 border border-green-500/30 rounded-lg max-w-2xl w-full p-8 relative"
            onclick="event.stopPropagation()">
            <!-- Close button -->
            <button onclick="closeBioPopup()"
                class="absolute top-4 right-4 text-green-500 hover:text-green-400 transition-colors">
                <span class="material-symbols-outlined">close</span>
            </button>

            <!-- Bio Content -->
            <h2 class="text-3xl font-bold text-green-500 mb-4 glitch-text" data-text="PIXELSTORTION">PIXELSTORTION</h2>
            <div class="text-gray-300 space-y-4 font-mono-custom text-sm leading-relaxed">
                <p>Pixelstortion has the goal of producing Adjacent Realities. Immersive narrative ecosystems that
                    operate with the complexity and consequence of the real world.
                </p>
            </div>

            <!-- Links Section -->
            <div class="mt-6 space-y-2 border-t border-green-500/20 pt-6">
                <a href="https://bio.pixelstortion.com" target="_blank"
                    class="block text-green-500 hover:text-green-400 transition-colors text-sm font-mono-custom">
                    → BIO
                </a>
                <a href="#" class="block text-green-500 hover:text-green-400 transition-colors text-sm font-mono-custom"
                    onclick="try { window.parent.location.href = PIXEL_MANIFEST.MATAALA; } catch(e) { window.location.href = PIXEL_MANIFEST.MATAALA; } event.preventDefault();">
                    → NALANI - Historical Fiction
                </a>
                <span class="block text-gray-500 text-sm font-mono-custom cursor-default">
                    → SILENCE IS THE TRAUMA - Crime Fiction
                </span>

                <!-- Social Media Links -->
                <a href="https://open.spotify.com/artist/3iSE6REoCh9Noh6hhzIytf?si=axB0ucGeQ9KFlcvAg0ziew"
                    target="_blank"
                    class="block text-green-500 hover:text-green-400 transition-colors text-sm font-mono-custom">
                    → Spotify
                </a>
                <a href="https://www.youtube.com/@PixelStortion" target="_blank"
                    class="block text-green-500 hover:text-green-400 transition-colors text-sm font-mono-custom">
                    → YouTube
                </a>
                <a href="https://instagram.com/@pixelstortion" target="_blank"
                    class="block text-green-500 hover:text-green-400 transition-colors text-sm font-mono-custom">
                    → Instagram
                </a>
                <a href="https://www.tiktok.com/@pixelstortion" target="_blank"
                    class="block text-green-500 hover:text-green-400 transition-colors text-sm font-mono-custom">
                    → TikTok
                </a>
                <a href="https://facebook.com/PixelStortion" target="_blank"
                    class="block text-green-500 hover:text-green-400 transition-colors text-sm font-mono-custom">
                    → Facebook
                </a>
            </div>
        </div>
    </div>

    <!-- Game Modal (Center Screen) -->
    <div id="game-modal" class="fixed inset-0 bg-black/90 backdrop-blur-sm z-50 hidden items-center justify-center p-4"
        onclick="closeGameModal()">
        <div id="game-modal-content" class="relative w-full max-w-2xl h-[80vh] bg-black rounded-lg overflow-hidden"
            onclick="event.stopPropagation()">
            <!-- Close button -->
            <button onclick="closeGameModal()"
                class="absolute top-4 right-4 z-50 text-green-500 hover:text-green-400 transition-colors bg-black/50 rounded-full p-2">
                <span class="material-symbols-outlined">close</span>
            </button>
            <!-- Game iframe -->
            <iframe id="game-modal-iframe" src="about:blank" class="w-full h-full border-0"
                allow="autoplay; fullscreen"></iframe>
        </div>
    </div>

    <!-- External JavaScript (load order matters!) -->
    <script src="js/config.js"></script>
    <script src="js/data-tracks.js"></script>
    <script src="js/data-profiles.js"></script>
    <script src="js/data-games.js"></script>
    <script src="js/data-articles.js"></script>
    <script src="js/gallery.js"></script>
    <script src="js/youtube-player.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/cipher-game.js"></script>
    <script src="js/main.js"></script>

</body>

</html>